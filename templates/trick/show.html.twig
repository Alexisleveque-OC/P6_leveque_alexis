{% extends 'base.html.twig' %}

{% block body %}

    <div class="card">
        <img src="http://placehold.it/1000x350" alt="" class="card-img-top">

        {% if app.user %}
            <div id="updateTrick" class="btn btn-secondary disabled">
                <a href="{{ path('trick_edit',{
                    'group_slug':trick.groupName.slug,
                    'id':trick.id,
                    'trick_slug':trick.slug
                }) }}" class="col-3">
                    <span class="oi oi-pencil"></span>
                </a>
                <a href="{{ path('deleteConf_trick',{
                    'group_slug':trick.groupName.slug,
                    'id':trick.id,
                    'trick_slug':trick.slug
                }) }}" class="col-3">
                    <span class="oi oi-delete"></span>
                </a>
            </div>
        {% endif %}
        </img>
        <div class="container">
            {% if question %}
                <h3 class="offset-2 col-9">Êtes-vous sûr de vouloir supprimer cette article ???</h3>
                <div class="row">
                    <div class="offset-4 ">
                        <a href="{{ path('delete_trick',{'id':trick.id}) }}" class="btn btn-danger">oui !</a>
                    </div>
                    <div class="offset-1 ">
                        <a href="{{ path('home') }}" class="btn btn-secondary">non !</a>
                    </div>
                </div>
            {% endif %}
            <div class="card">
                <h2 class="card-title">{{ trick.name }}</h2>
                <div id="cardGroup" class="card-title">{{ trick.groupName.title }}</div>
                <hr>
                <div class="content card-text">
                    {{ trick.description | raw }}
                </div>
                <div class="metadata card-footer">
                    {{ trick.createdAt | date('d/m/Y') }}
                </div>
            </div>
            {% if question == false %}
                <div class="container">
                    <div class="offset-1 col-10">
                        <h2>Les commentaires</h2>
                        <hr>
                        {% if app.user %}
                            {{ form_start(formComment, {'action': path('add_comment', {'slug':trick.slug})}) }}
                            {{ form_row(formComment.content) }}
                            <input type="submit" class="btn btn-primary" value="Envoyer">
                            {{ form_end(formComment) }}
                        {% endif %}
                        <hr>
                        {% if comments == null %}
                            <h4>Il n'y a pas encore de commentaires sur ce trick, soyez le preemier à een ajouter un
                                !!!</h4>
                        {% endif %}
                        {% for comment in comments %}
                            <div class="card">
                                <div class="row">
                                    <div class="col-2">
                                        <div class="card-title">
                                            {{ comment.user.username }}
                                        </div>
                                    </div>
                                    <div class="col-10">
                                        <div class="card-text">
                                            {{ comment.content }}
                                        </div>
                                        <div class="metadata card-footer">
                                            {{ comment.createdAt | date('d/m/Y') }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

{% endblock %}

{% block title %}

{% endblock %}

